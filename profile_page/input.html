<!-- {% extends 'base.html' %}
{% load static %}

{% block meta %} -->
<!DOCTYPE html>
<html lang="en">
<head>
   <title>Ubah My Profile</title>
</head>
<!-- {% endblock meta %}

{% block content %} -->
<body>
   <h3>Masukkan profile baru:</h3>
   <form id="formMyProfile">
     First Name:<br> <input type="text" name="firstName" id="firstName"><br>
     Last Name:<br> <input type="text" name="lastName" id="lastName">
     <br>
     Age:<br> <input type="number" name="age" min="0" value="0" id="age"><br>
     Description:<br> <input type="text" name="description" id="description"><br>
     <br>
     <input type="submit" value="Save Changes" />
      
      
   </form>
</body>
<!-- {% endblock content %}

{% block script %} -->
<script>
   function getCookie(name) {
      let cookieValue = null;
      if (document.cookie && document.cookie !== '') {
         const cookies = document.cookie.split(';');
         for (let i = 0; i < cookies.length; i++) {
               const cookie = cookies[i].trim();
               if (cookie.substring(0, name.length + 1) === (name + '=')) {
                  cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                  break;
               }
            }
         }
        return cookieValue;
      }
   const csrftoken = getCookie('csrftoken');
   formFocusTimer.onsubmit = async (e) => {
       e.preventDefault();
       firstName = formMyProfile.firstName.value;
       lastName = formMyProfile.lastName.value;
       age = formMyProfile.age.value;
       description = formMyProfile.description.value;
       $.ajax({
                    url: "/my-profile/session-update",
                    type: 'POST',
                    data: {
                     firstName: firstName,
                     lastName: lastName,
                     age: age,
                     description: description,
                     csrfmiddlewaretoken: csrftoken
                  },
                }).done(function(response) {
                  Redirect();
                })
   };
   function Redirect() {
       window.location.assign('/my-profile');
   }
 </script>
<!-- {% endblock script %} -->